# ==========================
# Challenge configuration
# ==========================

challenge.name=Tapaswee Dasari
challenge.regNo=22BRS1204
challenge.email=dasaritapaswee2018@gmail.com

# For you (last two digits even) -> Question 2 SQL is used.
# Question 1 can be a dummy.

challenge.question1Sql=SELECT 1;

challenge.question2Sql=WITH high_paid AS ( SELECT d.department_id, d.department_name, e.emp_id, e.first_name, e.last_name, DATE_PART('year', AGE(CURRENT_DATE, e.dob)) AS age, p.amount, ROW_NUMBER() OVER (PARTITION BY d.department_id ORDER BY p.amount DESC) AS rn FROM department d JOIN employee e ON d.department_id = e.department JOIN payments p ON e.emp_id = p.emp_id WHERE p.amount > 70000 ) SELECT department_name AS DEPARTMENT_NAME, ROUND(AVG(age), 2) AS AVERAGE_AGE, STRING_AGG(first_name || ' ' || last_name, ', ') FILTER (WHERE rn <= 10) AS EMPLOYEE_LIST FROM high_paid GROUP BY department_id, department_name ORDER BY department_id DESC


# ==========================
# JPA / H2
# ==========================

spring.datasource.url=jdbc:h2:mem:challenge-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# H2 console (optional)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Logging (optional)
logging.level.org.springframework.web=INFO
logging.level.com.bajaj.bajaj=DEBUG

